<Page x:Class="CutterManagement.UI.Desktop.UpdatesPage" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:CutterManagement.UI.Desktop"
      Title="UpdatesPage" d:DesignHeight="450"
      d:DesignWidth="800" mc:Ignorable="d">

    <Border Padding="12" Background="{DynamicResource BackgroundColorBrush1}">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Margin="6,10"
                   Foreground="{DynamicResource ForegroundColorBrush3}"
                   FontFamily="{StaticResource RobotoFlexRegular}"
                   FontSize="{StaticResource XXLarge}"
                   FontWeight="Black">
                <TextBlock>
                    <![CDATA[News & Updates]]>
                </TextBlock>
            </Label>

            <Grid Grid.Row="1" Height="40">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Width="200"
                        Margin="10,0" Content="Plus"
                        Tag="Add new information"
                        Command="{Binding OpenNewInfoUpdateCommand}"
                        Style="{StaticResource TransparentButtonWithTextStyle}" />

            </Grid>

            <Border Grid.Row="2" Height="4"
                    Margin="0,20,0,0" VerticalAlignment="Top"
                    BorderThickness="0,1.8,0,0" Opacity="0.4">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0 0" EndPoint=" 1 0">
                        <GradientStop Offset="0" Color="{DynamicResource BackgroundColor1}" />
                        <GradientStop Offset="0.5" Color="{DynamicResource BackgroundColor7}" />
                        <GradientStop Offset="1" Color="{DynamicResource BackgroundColor1}" />
                    </LinearGradientBrush>
                </Border.BorderBrush>

            </Border>

            <!--  items  -->
            <Border Grid.Row="2" Margin="10,20,10,0"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource BorderColorBrush6}">

                <ScrollViewer Padding="10" local:ScrollViewerAttachedProperties.SetScrollSpeed="20"
                              VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled">

                    <Grid>

                        <ItemsControl x:Name="Items" ItemsSource="{Binding InfoUpdates}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <VirtualizingStackPanel Orientation="Vertical">
                                        <local:InfoUpdatesItemControl Width="1000" Margin="20" />
                                    </VirtualizingStackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <Border Grid.Row="1" Padding="20"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource BorderColorBrush1}"
                                Visibility="{Binding IsInfoUpdateEmpty, UpdateSourceTrigger=PropertyChanged, Converter={local:BooleanToVisibilityConverter}, ConverterParameter=Invert}">

                            <TextBlock Padding="20" HorizontalAlignment="Center"
                                       VerticalAlignment="Top" Text="No current News or Updates to show"
                                       FontFamily="{StaticResource RobotoFlexRegular}"
                                       FontSize="{StaticResource XLarge}"
                                       Foreground="{DynamicResource ForegroundColorBrush3}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding IsBusy}" Value="False" />
                                                    <Condition Binding="{Binding InfoUpdates.Count}" Value="0" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>

                            </TextBlock>
                        </Border>


                    </Grid>

                </ScrollViewer>

            </Border>
        </Grid>
    </Border>
</Page>
